<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sunday Collective Scavenger Hunt</title>
    <link rel="stylesheet" href="css/fonts.css">
    <style>
        /* General Reset */
        body,
        h1,
        p,
        button,
        input,
        textarea,
        div {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'RainbowsansColor', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: #f3eac3;
        }

        /* Welcome Section */
        #welcome-section {
            text-align: center;
            padding: 20px;
            background-color: #f3eac3;
            font-size: 24px;
            font-weight: bold;
        }

        /* Photo Section */
        #photo-section {
            flex: 1;
            padding: 16px;
            background-color: #f3eac3;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
            text-align: center;
        }

        #photo-section h1 {
            font-size: 22px;
            margin-bottom: 16px;
            color: #f3eac3;
        }

        #photo-section video {
            width: 100%;
            max-width: 80%;
            border-radius: 10px;
            margin-bottom: 12px;
        }

        #photo-section input,
        button {
            padding: 12px;
            margin: 10px 0;
            width: 90%;
            max-width: 300px;
            font-size: 14px;
            border: 1px solid #f3eac3;
            border-radius: 5px;
            cursor: pointer;
        }

        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 5px;
            width: 100%;
            padding: 10px 0;
            justify-items: center;
        }

        .photo-gallery img,
        .photo-gallery video {
            width: 100%;
            max-width: 80px;
            max-height: 80px;
            object-fit: cover;
            border-radius: 8px;
        }

        
        /* Map Section */
        #map-section {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f3eac3;
            padding: 20px 0;
            position: relative;
        }

        #map-section img {
            width: 100%;
            max-width: 900px;
            height: auto;
            object-fit: cover;
            border-radius: 10px;
        }

        /* Instructions Section */
        #instructions-section {
            margin-top: 20px;
            padding: 10px;
            background-color: #f3eac3;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        #instructions-section img {
            width: 100%;
            height: auto;
            max-width: 900px;
            border-radius: 8px;
        }

        /* Dancing Stickers */
        .sticker {
            position: absolute;
            animation: dance 2s ease-in-out infinite alternate;
            pointer-events: none;
        }

        .sticker1 {
            top: 10%;
            left: 10%;
            width: 50px;
            height: 50px;
            background-image: url('sticker1.png');
            background-size: cover;
        }

        .sticker2 {
            top: 15%;
            left: 80%;
            width: 50px;
            height: 50px;
            background-image: url('sticker2.png');
            background-size: cover;
        }

        .sticker3 {
            top: 60%;
            left: 40%;
            width: 50px;
            height: 50px;
            background-image: url('sticker3.png');
            background-size: cover;
        }

        @keyframes dance {
            0% {
                transform: translateY(0);
            }

            100% {
                transform: translateY(-20px);
            }
        }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            #photo-section h1 {
                font-size: 18px;
            }

            #photo-section input,
            button {
                width: 100%;
                max-width: none;
            }

            #map-section img,
            #instructions-section img {
                width: 100%;
                max-width: 100%;
                height: auto;
            }

            .photo-gallery img,
            .photo-gallery video {
                max-width: 100px;
                max-height: 100px;
            }
        }

        /* Footer Section */
        #footer {
            text-align: center;
            padding: 20px;
            background-color: #f3eac3;
            font-size: 18px;
        }

        /* Background Music Controls */
        #music-controls {
            text-align: center;
            margin-top: 10px;
        }

        #volume-slider {
            width: 100px;
        }
    </style>
</head>

<body>
    <!-- Welcome Section -->
    <div id="welcome-section">
        <h2>WELCOME TO THE SUNDAY COLLECTIVE SCAVENGER HUNT</h2>
    </div>

    <div id="photo-section">
        <h1>The Sunday Collective Scavenger Hunt Game</h1>
        <p>"Ready, set, go—grab your phone and start the show! A hunt awaits with clues to find, Capture the moments, follow the signs, The Sunday Collective’s waiting for you, Where adventure and fun are all brand new!"</p>
        <input type="text" id="playerName" placeholder="Enter your name" />

        <!-- Camera Preview -->
        <video id="camera" autoplay playsinline></video>

        <!-- Capture and Record Buttons -->
        <button id="capture">Capture Photo</button>
        <button id="record">Start Recording</button>
        <button id="stop-recording" style="display: none;">Stop Recording</button>
        <button id="switch-camera">Switch Camera</button>
        <button id="upload">Upload Photos and Videos</button>

        <!-- Photo and Video Gallery -->
        <div id="photoGallery" class="photo-gallery"></div>
    </div>

    <!-- Instructions Section -->
    <div id="instructions-section">
        <img src="instruction.png" alt="Scavenger Hunt Map">
    </div>

    <!-- Map Section -->
    <div id="map-section">
        <img src="newscavmap.png" alt="Instructions Image">

        <!-- Dancing Stickers -->
        <div class="sticker sticker1"></div>
        <div class="sticker sticker2"></div>
        <div class="sticker sticker3"></div>
    </div>

    <!-- Background Music Section -->
    <div id="music-controls">
        <button id="play-music">Play Music</button>
        <button id="pause-music" style="display: none;">Pause Music</button>
        <br>
        <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.5">
        <span id="volume-value">Volume: 50%</span>
    </div>

    <!-- Footer Section -->
    <div id="footer">
        <p>"Thank you so much for playing!"</p>
    </div>

    <!-- JavaScript to Enable Features -->
    <script>
        let mediaStream;
        let mediaRecorder;
        let chunks = [];
        let currentCamera = "user"; // Default to front camera
        let photoCount = 0; // Track number of photos
        let videoCount = 0; // Track number of videos

        const camera = document.getElementById('camera');
        const captureButton = document.getElementById('capture');
        const recordButton = document.getElementById('record');
        const stopButton = document.getElementById('stop-recording');
        const switchCameraButton = document.getElementById('switch-camera');
        const gallery = document.getElementById('photoGallery');
        const playMusicButton = document.getElementById('play-music');
        const pauseMusicButton = document.getElementById('pause-music');
        const volumeSlider = document.getElementById('volume-slider');
        const volumeValue = document.getElementById('volume-value');
        const uploadButton = document.getElementById('upload');

        let backgroundMusic = new Audio('Jungle Village  D&DTTRPG Music  1 Hour-[AudioTrimmer.com]');
        backgroundMusic.loop = true;
        backgroundMusic.volume = 0.5; // Default volume

        // Initialize camera stream and request permissions
        async function initCamera() {
            try {
                mediaStream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: currentCamera },
                    audio: false
                });
                camera.srcObject = mediaStream;
            } catch (error) {
                alert('Error accessing camera: ' + error.message);
            }
        }

        // Capture a photo
        captureButton.addEventListener('click', () => {
            if (photoCount >= 20) {
                alert('You can only take 20 photos.');
                return;
            }

            const canvas = document.createElement('canvas');
            canvas.width = camera.videoWidth;
            canvas.height = camera.videoHeight;
            canvas.getContext('2d').drawImage(camera, 0, 0, canvas.width, canvas.height);

            const img = document.createElement('img');
            img.src = canvas.toDataURL('image/png');
            img.classList.add('question-mark'); // Add question mark class
            gallery.appendChild(img);
            photoCount++;
        });

        // Start recording video
        recordButton.addEventListener('click', () => {
            if (videoCount >= 3) {
                alert('You can only record 3 videos.');
                return;
            }

            chunks = [];
            mediaRecorder = new MediaRecorder(mediaStream);
            mediaRecorder.ondataavailable = (event) => chunks.push(event.data);
            mediaRecorder.onstop = () => {
                const videoBlob = new Blob(chunks, { type: 'video/mp4' });
                const videoUrl = URL.createObjectURL(videoBlob);
                const video = document.createElement('video');
                video.src = videoUrl;
                video.controls = true;
                gallery.appendChild(video);
                videoCount++;
            };

            mediaRecorder.start();
            recordButton.style.display = 'none';
            stopButton.style.display = 'inline';
        });

        // Stop video recording
        stopButton.addEventListener('click', () => {
            mediaRecorder.stop();
            stopButton.style.display = 'none';
            recordButton.style.display = 'inline';
        });

        // Switch camera
        switchCameraButton.addEventListener('click', () => {
            currentCamera = (currentCamera === 'user') ? 'environment' : 'user';
            if (mediaStream) {
                mediaStream.getTracks().forEach(track => track.stop());
            }
            initCamera();
        });

        // Play/Pause background music
        playMusicButton.addEventListener('click', () => {
            backgroundMusic.play();
            playMusicButton.style.display = 'none';
            pauseMusicButton.style.display = 'inline';
        });

        pauseMusicButton.addEventListener('click', () => {
            backgroundMusic.pause();
            playMusicButton.style.display = 'inline';
            pauseMusicButton.style.display = 'none';
        });

        // Adjust volume
        volumeSlider.addEventListener('input', () => {
            backgroundMusic.volume = volumeSlider.value;
            volumeValue.textContent = `Volume: ${(volumeSlider.value * 100).toFixed(0)}%`;
        });

        // Initialize camera when the page loads
        window.onload = initCamera;
    </script>
</body>

</html>
